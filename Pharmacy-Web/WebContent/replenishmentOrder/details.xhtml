<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
  xmlns:h="http://java.sun.com/jsf/html"
  xmlns:f="http://java.sun.com/jsf/core"
  xmlns:ui="http://java.sun.com/jsf/facelets">

<ui:composition template="/resources/master.xhtml">
  <ui:define name="metadata">
    <f:metadata>
      <f:viewParam name="id" value="#{replenishmentOrderPage.id}"></f:viewParam>
      <f:event listener="#{replenishmentOrderPage.ensureInitialized}" type="preRenderView"></f:event>
    </f:metadata>
  </ui:define>
  <ui:define name="title">Replenishment Order Details</ui:define>
  <ui:define name="content">
    <div class="details"><h2>Replenishment Order #{replenishmentOrderPage.order.id}</h2>
  <h:form><h:panelGrid columns="2" columnClasses="label, value form-input" footerClass="form-footer" styleClass="details-table">
    State
    <h:outputText value="#{replenishmentOrderPage.order.state}" />
    Expected delivery date
    <h:outputText
      rendered="#{replenishmentOrderPage.order.state == 'ORDERED' or replenishmentOrderPage.order.state == 'FINISHED'}"
      value="#{replenishmentOrderPage.order.expectedDelivery}">
      <f:convertDateTime pattern="yyyy-MM-dd HH:mm" timeZone="Europe/Berlin"/>
    </h:outputText>
    Actual delivery date
    <h:outputText
      rendered="#{replenishmentOrderPage.order.state == 'FINISHED'}"
      value="#{replenishmentOrderPage.order.actualDelivery}">
      <f:convertDateTime pattern="yyyy-MM-dd HH:mm" timeZone="Europe/Berlin"/>
    </h:outputText>
    <f:facet name="footer">
      <h:commandButton
        disabled="#{not replenishmentOrderPage.order.state.proceedable}"
        rendered="#{replenishmentOrderPage.order.state.proceedable}"
        value="Proceed to #{replenishmentOrderPage.order.state.next}" actionListener="#{replenishmentOrderPage.proceed}" />
      <h:commandButton
        disabled="#{not replenishmentOrderPage.order.state.cancellable}"
        rendered="#{replenishmentOrderPage.order.state.cancellable}"
        value="Cancel" actionListener="#{replenishmentOrderPage.cancel}" />
    </f:facet>
  </h:panelGrid></h:form></div>
  </ui:define>
</ui:composition>
</html>
